# 🎯 Avante 檔案標記與 AI 處理指南

## 📋 概述

Avante.nvim 提供了強大的檔案標記功能，讓您可以輕鬆地將檔案內容傳送給 AI 進行分析、優化或討論。

## 🚀 快速開始

### 基本快捷鍵

| 快捷鍵 | 功能 | 說明 |
|--------|------|------|
| `<leader>ac` | 啟動 Avante 聊天 | 開始與 AI 對話 |
| `<leader>af` | 標記當前檔案 | 將當前打開的檔案標記給 AI |
| `<leader>aF` | 選擇檔案標記 | 使用 Telescope 選擇檔案並標記 |
| `<leader>an` | 新建聊天 | 開始新的對話會話 |
| `<leader>at` | 切換 AI 面板 | 顯示/隱藏 AI 面板 |

## 📁 檔案標記方法

### 方法一：直接標記當前檔案

1. 打開要分析的檔案
2. 按 `<leader>af`
3. 在 Avante 聊天中輸入您的問題

### 方法二：選擇特定檔案

1. 按 `<leader>aF`
2. 使用 Telescope 選擇檔案
3. 按 `<CR>` 確認選擇
4. 在 Avante 聊天中輸入您的問題

### 方法三：在聊天中手動標記

1. 按 `<leader>ac` 啟動聊天
2. 在聊天中輸入 `@filename.ext`
3. 例如：`@main.php` 或 `@src/components/App.js`

## 💬 常用 AI 指令範例

### 代碼分析
```
請分析這個檔案的代碼結構和設計模式
```

### 性能優化
```
幫我檢查這個檔案的性能問題並提供優化建議
```

### 安全性檢查
```
請檢查這個檔案的安全性問題
```

### 代碼重構
```
請幫我重構這個檔案，提高可讀性和維護性
```

### 文檔生成
```
請為這個檔案生成詳細的 API 文檔
```

### 測試建議
```
請為這個檔案生成單元測試
```

## 🔧 進階配置

### 檔案選擇器配置

您的配置中支援多種檔案選擇器：

1. **Telescope** (預設)
   - 功能最完整
   - 支援模糊搜索
   - 可自定義佈局

2. **Mini.pick**
   - 輕量級選擇器
   - 快速響應

3. **FZF**
   - 高性能搜索
   - 支援複雜過濾

### 切換檔案選擇器

在 `nvim/lua/plugins/avante.lua` 中修改：

```lua
file_selector = {
  provider = "mini.pick", -- 改為 "mini.pick" 或 "fzf"
}
```

## 🎨 使用技巧

### 1. 多檔案分析
```
@file1.php @file2.php 請比較這兩個檔案的差異
```

### 2. 目錄分析
```
@src/ 請分析這個目錄的整體架構
```

### 3. 特定函數分析
```
@main.php 請分析 login() 函數的實現
```

### 4. 錯誤調試
```
@error.log 請幫我分析這個錯誤日誌
```

## 🔍 故障排除

### 常見問題

1. **檔案選擇器不工作**
   - 檢查是否安裝了對應的依賴
   - 確認配置中的 provider 設定

2. **AI 無法讀取檔案**
   - 確認檔案路徑正確
   - 檢查檔案權限

3. **聊天界面無法打開**
   - 確認 API 金鑰設定正確
   - 檢查網路連接

### 調試命令

```vim
:AvanteToggle    # 切換 AI 面板
:AvanteHistory   # 查看聊天歷史
:AvanteStop      # 停止當前 AI 請求
```

## 📚 最佳實踐

1. **明確的問題描述**
   - 具體說明您想要 AI 做什麼
   - 提供足夠的上下文

2. **適當的檔案選擇**
   - 只選擇相關的檔案
   - 避免選擇過大的檔案

3. **迭代式對話**
   - 根據 AI 的回答進一步提問
   - 逐步深入分析

4. **保存重要對話**
   - 重要的分析結果可以保存
   - 建立個人的 AI 助手知識庫

## 🎯 工作流程範例

### 代碼審查流程
1. `<leader>af` - 標記當前檔案
2. "請進行代碼審查，指出潛在問題"
3. 根據 AI 建議進行修改
4. 再次詢問 "修改後的代碼是否還有問題？"

### 性能優化流程
1. `<leader>aF` - 選擇要優化的檔案
2. "請分析性能瓶頸並提供優化方案"
3. 實施 AI 建議的優化
4. "請檢查優化後的代碼是否正確"

### 學習新技術流程
1. `<leader>ac` - 開始新聊天
2. "@example.js 請解釋這個檔案的設計模式"
3. "請提供更多相關的設計模式範例"
4. "如何將這些模式應用到我的專案中？"

---

## 🚀 快速參考

### 常用快捷鍵
- `<leader>ac` - 聊天
- `<leader>af` - 標記當前檔案
- `<leader>aF` - 選擇檔案標記
- `<leader>an` - 新建聊天
- `<leader>at` - 切換面板

### 常用指令
- `@filename` - 標記檔案
- `@path/to/file` - 標記路徑中的檔案
- `@directory/` - 標記目錄

### 配置檔案
- `nvim/lua/plugins/avante.lua` - 主要配置
- `nvim/lua/config/keymaps.lua` - 快捷鍵配置 